# ZisK Release Kit

## Usage

To run the ZisK Release Kit Docker container, execute the following command:

```bash
./run-docker.sh
```

This will build the Docker image and container, copy the Release Kit script files, install the necessary dependencies to build ZisK and the setup files, and finally open the Release Kit menu inside the container.

If the container already exists, you will be asked whether you want to connect to it or recreate it.

>[!CAUTION]
>
>If you choose to recreate the container, all existing content inside it will be lost.

> [!TIP]
>
>The Docker container includes a `${HOME}/output` directory, which is mapped to the `./output` folder on the host.  
>You can use this folder to copy any files you want to make available outside of the container.

## Menu Options

1. **Edit environment variables**  
   Opens the `.env` file with the `nano` editor, allowing you to modify environment variable values.  
   These variables let you specify the repository branches to use, the setup version to generate or install, and the parameters to use when proving in distributed mode.

2. **Build ZisK from source**  
   Builds ZisK using the `zisk` and `pil2-proofman` repository sources (checking out the branches specified in the environment variables).  
   After building, it installs the CLI tools and necessary files to the `$HOME/.zisk` folder and adds that folder to the `$PATH` environment variable.

3. **Build setup from source**  
   Builds the setup files (proving key) using the `pil2-proofman`, `pil2-proofman-js`, and `pil2-compiler` repository sources (checking out the branches specified in the environment variables).  
   After building, it installs the proving key to the `$HOME/.zisk` folder and generates the constant files using the `cargo-zisk check-setup` command.

4. **Package setup outcome**  
   Packages the setup artifacts (`.tar.gz` and `.md5` files for proving and verifying keys) using the setup files generated in option 3.  
   The artifacts are stored in the `${HOME}/output` directory inside the container, which is mapped to the `./output` folder on the host, making them available externally.

5. **Test sha_hasher**  
   Creates, builds, and emulates the `sha_hasher` program, then generates and verifies the proof.  
   It also performs constraints verification.

6. **Test pessimistic proof**  
   Tests the pessimistic proof program using the files from the `zisk-testvectors` repository.  
   It first proves in non-distributed mode using the `pp_input_1_1.bin` input file, and then in distributed mode using the `pp_input_20_20.bin` input file.

7. **Test Ethereum block**  
   Tests Ethereum blocks proof generation using the files from the `zisk-testvectors` repository.
   It proves blocks 20852412 (38 txs, 3 MGas) and 21077746 (52 txs, 27 MGas) in distributed mode.

8. **Install setup from public artifacts**  
   Downloads and installs the proving key files from the public artifacts corresponding to the `SETUP_VERSION` environment variable.  
   After installation, it generates the constant files using the `cargo-zisk check-setup` command.

9. **Install setup from local artifacts**  
   Installs the proving key files using the setup artifacts generated by option 4, which must be located in the `${HOME}/output` directory.
   After installation, it generates the constant files using the `cargo-zisk check-setup` command.

10. **Shell**  
    Opens a command line shell inside the container.  
    When you exit the shell, you will return to the Release Kit menu.

11. **Exit**  
   Exits the Release Kit container and returns to the host shell.
